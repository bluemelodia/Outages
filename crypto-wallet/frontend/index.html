<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>CryptoWallet Pro</title>
	<link rel="stylesheet" href="./styles/main.css">
</head>

<body>
	<!-- Main Flex Container -->
	<div class="main-flex">
		<!-- Card Area -->
		<div class="card-container">
			<div class="container">
				<div class="logo">
					<h1>ðŸš€ CryptoWallet Pro</h1>
				</div>

				<div id="login-page" class="page active">
					<!-- Tabs -->
					<div id="auth-tabs"></div>

					<!-- Login Tab Content -->
					<div id="login-tab-content" class="auth-tab-content active">
					</div>

					<!-- Register Tab Content -->
					<div id="register-tab-content" class="auth-tab-content">
					</div>
				</div>

				<!-- Main Menu -->
				<div id="menu-page" class="page active">
					<div class="welcome-banner">
						<h2 id="welcome-message"></h2>
					</div>

					<div class="balance-card">
						<div class="balance-amount" id="balance">$12,543.21</div>
						<div class="balance-label">Available Balance</div>
					</div>

					<div id="menu-items"></div>

					<footer class="card-footer"
						style="margin-top:2rem; text-align:center; font-size:0.9rem; color:#888;">
						Icons by <a href="https://icons8.com/">Icons8</a>.
					</footer>
				</div>

				<!-- Send Crypto Page -->
				<div id="send-crypto-page" class="page"></div>

				<!-- Transactions Page -->
				<div id="transactions-page" class="page">
					<h2>Transaction History</h2>

					<div class="error-message" id="transactions-error"></div>
					<div class="spinner" id="transactions-spinner"></div>
					<div id="transactions-list"></div>

					<button class="btn btn-secondary" onclick="navigateTo('menu')">
						Back to Menu
					</button>
				</div>

				<!-- Credentials Page -->
				<div id="credentials-page" class="page">
					<h2>Change Credentials</h2>

					<div class="error-message" id="credentials-error"></div>

					<div class="form-group" id="current-password-field"></div>
					<div class="form-group" id="new-password-field"></div>
					<div class="form-group" id="confirm-password-field"></div>

					<button class="btn btn-primary" onclick="initiateChangeCredentials()">
						Update Credentials
					</button>
					<button class="btn btn-secondary" onclick="navigateTo('menu')">
						Back to Menu
					</button>

					<div class="spinner" id="credentials-spinner"></div>
				</div>

				<!-- Identity Verification Modal -->
				<div id="verification-modal" class="modal">
					<div class="modal-content">
						<h3>Identity Verification Required</h3>
						<p>
							Please enter the one-time passcode sent to your registered device.
						</p>

						<div class="form-group">
							<input type="text" id="verification-code" placeholder="Enter 6-digit code" maxlength="6">
						</div>

						<button class="btn btn-primary" onclick="verifyIdentity()">
							Verify
						</button>
						<button class="btn btn-secondary" onclick="cancelVerification()">
							Cancel
						</button>

						<div class="spinner" id="verification-spinner"></div>
					</div>
				</div>
			</div>
		</div>
		<!-- Table Area -->
		<div class="table-container">
			<div class="table-scroll-wrapper">
				<table class="coin-table" id="coin-market-table">
					<!-- JS will inject thead and tbody here -->
				</table>
			</div>
		</div>
	</div>

	<!-- Branded alerts -->
	<div id="custom-alert" class="modal">
		<div class="modal-content">
			<h3 id="custom-alert-title">Alert</h3>
			<p id="custom-alert-message"></p>
			<button id="custom-alert-ok" class="btn btn-primary">OK</button>
		</div>
	</div>

	<!-- Firebase CDN Scripts -->
	<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
	<!-- Cloud Firestore -->
	<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

	<script type="module">
		import { initializeApp } from './scripts/app.js';

		if (document.readyState === 'loading') {
			console.log('About to add DOMContentLoaded event listener.');
			document.addEventListener('DOMContentLoaded', initializeApp);
		} else {
			console.log('DOM content has already been loaded, initialize the app directly.');
			initializeApp();
		}
	</script>
</body>

</html>